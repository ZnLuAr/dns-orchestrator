# v1.5.2 发行说明

## 概述

v1.5.2 是一个错误处理增强版本，大幅扩展了阿里云 DNS 和 Cloudflare 的错误码映射覆盖范围，使错误信息更加准确和友好。

## 改进

### 阿里云 DNS 错误码映射增强

新增约 40 个错误码的精确映射，涵盖以下类别：

**配额/频率限制**：
- `QuotaExceeded.ARecord`、`QuotaExceeded.Record`、`Throttling` 等限流错误现可正确识别

**域名状态**：
- `DomainRecordLocked`、`DomainExpiredDNSForbidden` 等域名锁定/过期错误
- 支持黑洞状态识别（`RecordForbidden.BlackHole`）

**权限控制**：
- `Forbidden`、`OperationDomain.NoPermission`、`IllegalUser` 等权限错误

**参数验证**：
- 记录类型（`InvalidRR.TypeEmpty`）
- 记录值（`InvalidRR.AValue`、`InvalidRR.AAAAValue` 等）
- 主机记录（`InvalidRR.RrEmpty`、`InvalidRR.Format`）
- TTL（`SubDomainInvalid.TTL`）
- 线路（`SubDomainInvalid.Line`、`UnsupportedLine`）
- MX 优先级（`SubDomainInvalid.Priority`）
- 域名格式（`InvalidDomainName.Format`、`DomainEmpty`）

### Cloudflare 错误码映射增强

新增约 15 个错误码的精确映射：

**认证错误扩展**：
- 新增 `6003`（无效请求头）、`6103`（X-Auth-Key 格式错误）、`6111`（Authorization 格式错误）

**参数验证**：
- `1004`（DNS 验证错误）
- `9000`（无效名称）、`9005`（IPv4 格式错误）、`9006`（IPv6 格式错误）
- `9009`（MX 记录值错误）、`9021`（TTL 范围错误）、`9041`（不支持代理）

**记录冲突扩展**：
- `81053`-`81058` 系列：精确识别 A/AAAA/CNAME/NS 记录冲突

**配额限制**：
- `81045`（记录配额超限）

**Zone 不存在**：
- 新增 `7000`（无效 URI 路由）

## 技术统计

- **修改文件**：5 个
- **新增代码**：+243 行
- **删除代码**：-30 行
- **净增加**：+213 行

## 升级说明

从 v1.5.1 升级无需额外操作，直接安装新版本即可。

此版本不涉及 API 变更，仅增强了错误信息的可读性和准确性。
